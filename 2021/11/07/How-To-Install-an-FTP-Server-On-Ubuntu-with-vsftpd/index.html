<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>How To Install an FTP Server On Ubuntu with vsftpd | PHNASA BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="IntroductionIf you are looking to install an FTP server on Ubuntu, you can’t beat the simplicity of vsftpd . FTP stands for File Transfer Protocol. It is similar to HTTP (HyperText Transfer Protocol),">
<meta property="og:type" content="article">
<meta property="og:title" content="How To Install an FTP Server On Ubuntu with vsftpd">
<meta property="og:url" content="https://cphpi.github.io/2021/11/07/How-To-Install-an-FTP-Server-On-Ubuntu-with-vsftpd/index.html">
<meta property="og:site_name" content="PHNASA BLOG">
<meta property="og:description" content="IntroductionIf you are looking to install an FTP server on Ubuntu, you can’t beat the simplicity of vsftpd . FTP stands for File Transfer Protocol. It is similar to HTTP (HyperText Transfer Protocol),">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://192.168.100.150:4567/assets/uploads/files/1636215779765-how-to-install-ftp-server-on-ubuntu-using-vsftpd.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636215849751-sudo-apt-get-update-ubuntu-vsftpd.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636215894864-install-vsftpd-ubuntu-ftp.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636215980766-configure-firewall-to-allow-ftp-traffic.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636216221569-write-enable-yes-vsftpd-conf.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636216302377-chroot-local-user-yes-vsftpd-conf.png">
<meta property="og:image" content="https://cphpi.github.io/assets/uploads/files/1636216446038-chroot-list-file-vsftpd.png">
<meta property="article:published_time" content="2021-11-07T10:08:00.000Z">
<meta property="article:modified_time" content="2021-11-07T10:17:06.673Z">
<meta property="article:author" content="PAKHO">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://192.168.100.150:4567/assets/uploads/files/1636215779765-how-to-install-ftp-server-on-ubuntu-using-vsftpd.png">
  
    <link rel="alternate" href="/atom.xml" title="PHNASA BLOG" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">PHNASA BLOG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://cphpi.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-How-To-Install-an-FTP-Server-On-Ubuntu-with-vsftpd" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/11/07/How-To-Install-an-FTP-Server-On-Ubuntu-with-vsftpd/" class="article-date">
  <time class="dt-published" datetime="2021-11-07T10:08:00.000Z" itemprop="datePublished">2021-11-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      How To Install an FTP Server On Ubuntu with vsftpd
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p><strong>If you are looking to install an FTP server on Ubuntu, you can’t beat the simplicity of vsftpd .</strong></p>
<p>FTP stands for File Transfer Protocol. It is similar to HTTP (HyperText Transfer Protocol), in that it specifies a language for transferring data over a network. FTP is unencrypted by default, so by itself, it is not a good choice for secure transmission of data.</p>
<p>This guide will help you install and configure an FTP server with vsftpd on Ubuntu.</p>
<p><img src="http://192.168.100.150:4567/assets/uploads/files/1636215779765-how-to-install-ftp-server-on-ubuntu-using-vsftpd.png" alt="how-to-install-ftp-server-on-ubuntu-using-vsftpd.png"> </p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ul>
<li>Access to a user account with sudo privileges</li>
<li>Access to a terminal window/command line (Ctrl-Alt-T)</li>
<li>The apt package manager, included by default<span id="more"></span>
<h3 id="Step-1-Update-System-Packages"><a href="#Step-1-Update-System-Packages" class="headerlink" title="Step 1: Update System Packages"></a>Step 1: Update System Packages</h3>Start by updating your repositories – enter the following in a terminal window:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>
The system proceeds to update the repositories.<br><img src="/assets/uploads/files/1636215849751-sudo-apt-get-update-ubuntu-vsftpd.png" alt="sudo-apt-get-update-ubuntu-vsftpd.png"> </li>
</ul>
<h3 id="Step-2-Install-vsftpd-Server-on-Ubuntu"><a href="#Step-2-Install-vsftpd-Server-on-Ubuntu" class="headerlink" title="Step 2: Install vsftpd Server on Ubuntu"></a>Step 2: Install vsftpd Server on Ubuntu</h3><p>A common open-source FTP utility used in Ubuntu is vsftpd. It is recommended for its ease of use.</p>
<ol>
<li>To install vsftpd, enter the command:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vsftpd</span><br></pre></td></tr></table></figure>
This is an example of the output in Ubuntu.</li>
</ol>
<p><img src="/assets/uploads/files/1636215894864-install-vsftpd-ubuntu-ftp.png" alt="install-vsftpd-ubuntu-ftp.png"> </p>
<ol start="2">
<li>To launch the service and enable it at startup, run the commands:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start vsftpd</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable vsftpd</span><br></pre></td></tr></table></figure>
<h3 id="Step-3-Backup-Configuration-Files"><a href="#Step-3-Backup-Configuration-Files" class="headerlink" title="Step 3: Backup Configuration Files"></a>Step 3: Backup Configuration Files</h3><p>Before making any changes, make sure to back up your configuration files.</p>
<ol>
<li>Create a backup copy of the default configuration file by entering the following:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/vsftpd.conf  /etc/vsftpd.conf_default</span><br></pre></td></tr></table></figure>
<h3 id="Step-4-Create-FTP-User"><a href="#Step-4-Create-FTP-User" class="headerlink" title="Step 4: Create FTP User"></a>Step 4: Create FTP User</h3>Create a new FTP user with the following commands:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -m testuser</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 21/tcp</span><br></pre></td></tr></table></figure>
<img src="/assets/uploads/files/1636215980766-configure-firewall-to-allow-ftp-traffic.png" alt="configure-firewall-to-allow-ftp-traffic.png"> </li>
</ol>
<h3 id="Step-6-Connect-to-Ubuntu-FTP-Server"><a href="#Step-6-Connect-to-Ubuntu-FTP-Server" class="headerlink" title="Step 6: Connect to Ubuntu FTP Server"></a>Step 6: Connect to Ubuntu FTP Server</h3><p>Connect to the FTP server with the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ftp ubuntu-ftp</span><br></pre></td></tr></table></figure>
<p>Replace <em><strong>ubuntu-ftp</strong></em> with the name of your system (taken from the command line).</p>
<p><strong>Log in</strong> using the <strong>testuser</strong> account and password you just set. You should now be successfully logged in to your FTP server.</p>
<h2 id="Configuring-and-Securing-Ubuntu-vsftpd-Server"><a href="#Configuring-and-Securing-Ubuntu-vsftpd-Server" class="headerlink" title="Configuring and Securing Ubuntu vsftpd Server"></a>Configuring and Securing Ubuntu vsftpd Server</h2><h3 id="Change-Default-Directory"><a href="#Change-Default-Directory" class="headerlink" title="Change Default Directory"></a>Change Default Directory</h3><p>By default, the FTP server uses the <strong>/srv/ftp</strong> directory as the default directory. You can change this by creating a new directory and changing the FTP user home directory.</p>
<p>To change the FTP home directory, enter the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /srv/ftp/new_location</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -d /srv/ftp/new_location ftp</span><br></pre></td></tr></table></figure>
<p>Restart the <strong>vsftpd</strong> service to apply the changes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure>
<p>Now, you can put any files you want to share via FTP into the <strong>/srv/ftp</strong> folder (if you left it as the default), or the <em><strong>/srv/ftp/new_location/</strong></em> directory (if you changed it).</p>
<h3 id="Authenticate-FTP-Users"><a href="#Authenticate-FTP-Users" class="headerlink" title="Authenticate FTP Users"></a>Authenticate FTP Users</h3><p>If you want to let authenticated users upload files, edit the <strong>vsftpd.conf</strong> file by entering the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/vsftpd.conf</span><br></pre></td></tr></table></figure>
<p>Find the entry labeled <em><strong>write_enable=NO</strong></em>, and change the value to “<strong>YES</strong>.”</p>
<p><img src="/assets/uploads/files/1636216221569-write-enable-yes-vsftpd-conf.png" alt="write-enable-yes-vsftpd-conf.png"><br>Save the file, exit, then restart the FTP service with the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure>
<p>This allows the user to make changes inside their home directory.</p>
<h2 id="Securing-FTP"><a href="#Securing-FTP" class="headerlink" title="Securing FTP"></a>Securing FTP</h2><p>Numerous exploits take advantage of unsecured FTP servers. In response, there are several configuration options in vsftpd.conf that can help secure your FTP server.</p>
<h3 id="Limit-User-Access"><a href="#Limit-User-Access" class="headerlink" title="Limit User Access"></a>Limit User Access</h3><p>One method is to limit users to their home directory. Open <strong>vsftpd.conf</strong> in an editor and uncomment the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=YES</span><br></pre></td></tr></table></figure>
<p>This is an example of the file in <strong>nano</strong>:<br><img src="/assets/uploads/files/1636216302377-chroot-local-user-yes-vsftpd-conf.png" alt="chroot-local-user-yes-vsftpd-conf.png"> </p>
<h3 id="Create-a-User-List-File"><a href="#Create-a-User-List-File" class="headerlink" title="Create a User List File"></a>Create a User List File</h3><p>To create a list file, edit <strong>/etc/vsftpd.chroot_list</strong>, and add one user per line.</p>
<p>Instruct your FTP server to limit this list of users to their own home directories by editing <strong>vsftpd.conf</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=YES</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_list_file=/etc/vsftpd.chroot_list</span><br></pre></td></tr></table></figure>
<p>The image ilustrates the edits that were made:<br><img src="/assets/uploads/files/1636216446038-chroot-list-file-vsftpd.png" alt="chroot-list-file-vsftpd.png"><br>Restart the <strong>vsftpd</strong> service:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure>
<p>By default, the list of blocked users from FTP access is stored in <strong>/etc/ftpusers</strong>. To add blocked users, edit this file and add one user per line.</p>
<h3 id="Encrypt-Traffic-With-FTPS"><a href="#Encrypt-Traffic-With-FTPS" class="headerlink" title="Encrypt Traffic With FTPS"></a>Encrypt Traffic With FTPS</h3><p>Another method to secure your FTP server is to encrypt the traffic. This is done by using <strong>FTPS</strong> – File Transfer Protocol over SSL (Secure Socket Layer).</p>
<p>For this to work, users need to be set up with a shell account on the FTP server. This will add a layer of secure encryption to your FTP traffic.</p>
<ol>
<li><p>Start by creating a new certificate with openssl. To do so, run the command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/vsftpd.pem -out /etc/ssl/private/vsftpd.pem</span><br></pre></td></tr></table></figure></li>
<li><p>Provide the required information when prompted or keep the default configuration by pressing <strong>Enter</strong>.</p>
</li>
<li><p>Next, open your <strong>vsftpd.conf</strong> file in an editor and change the line <strong>ssl_enable=NO</strong> to <strong>ssl_enable=YES</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssl_enable=YES</span><br></pre></td></tr></table></figure></li>
<li><p>Then, add the following lines:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rsa_cert_file=/etc/ssl/private/vsftpd.pem</span><br><span class="line">rsa_private_key_file=/etc/ssl/private/vsftpd.pem</span><br><span class="line">allow_anon_ssl=NO</span><br><span class="line">force_local_data_ssl=YES</span><br><span class="line">force_local_logins_ssl=YES</span><br><span class="line">ssl_tlsv1=YES</span><br><span class="line">ssl_sslv2=NO</span><br><span class="line">ssl_sslv3=NO</span><br><span class="line">require_ssl_reuse=NO</span><br><span class="line">ssl_ciphers=HIGH</span><br><span class="line">pasv_min_port=40000</span><br><span class="line">pasv_max_port=50000</span><br></pre></td></tr></table></figure></li>
<li><p>Save the changes and exit the file.</p>
</li>
<li><p>Finally, restart the service to apply the changes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Note:</strong> For more information on SSL configurations and certificates, please see the Ubuntu <a target="_blank" rel="noopener" href="https://ubuntu.com/server/docs">FTP server documentation</a>. Also, it’s worth noting that FTPS is a different protocol that SFTP. SFTP stands for Secure File Transfer Protocol, and it’s an entirely different protocol.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Now, you should have installed an FTP server on Ubuntu with <strong>vsftpd</strong>.</p>
<p>You should now be able to configure your user lists and accounts, and connect to your new FTP server. We also detailed the risks of the FTP protocol, and how to mitigate them.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://cphpi.github.io/2021/11/07/How-To-Install-an-FTP-Server-On-Ubuntu-with-vsftpd/" data-id="ckvp33bit0004m8dhfahrd76x" data-title="How To Install an FTP Server On Ubuntu with vsftpd" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/11/07/FUCK-U/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">FUCK U</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/11/07/How-To-Install-an-FTP-Server-On-Ubuntu-with-vsftpd/">How To Install an FTP Server On Ubuntu with vsftpd</a>
          </li>
        
          <li>
            <a href="/2021/11/07/FUCK-U/">FUCK U</a>
          </li>
        
          <li>
            <a href="/2021/11/07/0987654321/">987654321</a>
          </li>
        
          <li>
            <a href="/2021/11/07/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/11/07/1234567889/">1234567889</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 PAKHO<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>